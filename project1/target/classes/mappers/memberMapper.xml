<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.project.mapper.MemberMapper">
	
	<!-- 로그인 체크 -->
	<select id="loginMember" resultType="com.project.domain.MemberVO">
	   select * from employee
	   where emp_id=#{emp_id} and emp_pw=#{emp_pw}	
	</select>
	
	<!-- 회원정보 조회 -->
	<select id="getMember" resultType="MemberVO">
		select e.* , s.*
		 from employee e
		 left join user_setting s on e.emp_id = s.emp_id
		 where e.emp_id=#{emp_id}	
	</select>
	
	<!-- 회원정보 목록(list) -->
	<select id="getSearchedMemberList" resultType="MemberVO">
	    select * from employee
	    where 
	    replace(emp_name, ' ', '') like concat('%', #{keyword}, '%')
	    or replace(emp_tel, ' ', '') like concat('%', #{keyword}, '%')
	    or replace(emp_email, ' ', '') like concat('%', #{keyword}, '%')
	    or replace(emp_dnum, ' ', '') like concat('%', #{keyword}, '%')
	    or replace(emp_position, ' ', '') like concat('%', #{keyword}, '%')
	    or replace(emp_job, ' ', '') like concat('%', #{keyword}, '%')
	    or replace(emp_bnum, ' ', '') like concat('%', #{keyword}, '%')
	    or replace(emp_work_type, ' ', '') like concat('%', #{keyword}, '%')
	    or replace(emp_power, ' ', '') like concat('%', #{keyword}, '%')
	</select>
	
	<select id="getTeamList" resultType="MemberVO">
		select *
	     from employee
	     where emp_dnum = (
	         select emp_dnum
	         from employee
	         where emp_id = #{emp_id}
	     ) and emp_bnum = (
	         select emp_bnum
	         from employee
	         where emp_id = #{emp_id}
	     ) and emp_id != #{emp_id}
	</select>
	
	<select id="searchTools" resultType="SettingVO">
		select *
	     from tools
	     where tool_name like concat('%', #{keyword}, '%')
	</select>

</mapper>  
  